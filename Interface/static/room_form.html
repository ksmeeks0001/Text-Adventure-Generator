<meta http-equiv="pragma" content="no-cache" />
<h1>Create a New Room</h1>

<form> 
	<tr><th><label for="id_name">Name:</label></th><td><input type="text" name="name" value="Road" required id="id_name"></td></tr>
<tr><th><label for="id_description">Description:</label></th><td><textarea name="description" cols="40" rows="10" required id="id_description">
This road should lead you to town, not all adventures travel by road... but I suppose it is safer.</textarea></td></tr>
<tr><th><label for="id_items">Items:</label></th><td><select name="items" required id="id_items" multiple>
  <option value="None" selected>None</option>

  <option value="item">beer</option>

  <option value="item">stinky boot</option>

</select></td></tr>
<tr><th><label for="id_npcs">NPCs:</label></th><td><ul class="errorlist"><li>This field is required.</li></ul><select name="npcs" required id="id_npcs" multiple>
  <option value="None">None</option>

  <option value="character">inn keeper</option>

  <option value="character">scary guy</option>

  <option value="character">test</option>

</select></td></tr>
<tr><th><label for="id_north">North:</label></th><td><ul class="errorlist"><li>Select a valid choice. 1 is not one of the available choices.</li></ul><select name="north" id="id_north">
  <option value="None">None</option>

  <option value="room">Blacksmith</option>

  <option value="room">Inn</option>

  <option value="room">Merchant</option>

  <option value="room">room10</option>

  <option value="room">room11</option>

  <option value="room">room12</option>

  <option value="room">room13</option>

  <option value="room">room5</option>

  <option value="room">room6</option>

  <option value="room">room7</option>

  <option value="room">room8</option>

  <option value="room">room9</option>

  <option value="room">Village</option>

</select></td></tr>
<tr><th><label for="id_south">South:</label></th><td><ul class="errorlist"><li>Select a valid choice. 6 is not one of the available choices.</li></ul><select name="south" id="id_south">
  <option value="None">None</option>

  <option value="room">Blacksmith</option>

  <option value="room">Inn</option>

  <option value="room">Merchant</option>

  <option value="room">room10</option>

  <option value="room">room11</option>

  <option value="room">room12</option>

  <option value="room">room13</option>

  <option value="room">room5</option>

  <option value="room">room6</option>

  <option value="room">room7</option>

  <option value="room">room8</option>

  <option value="room">room9</option>

  <option value="room">Village</option>

</select></td></tr>
<tr><th><label for="id_west">West:</label></th><td><ul class="errorlist"><li>Select a valid choice. 11 is not one of the available choices.</li></ul><select name="west" id="id_west">
  <option value="None">None</option>

  <option value="room">Blacksmith</option>

  <option value="room">Inn</option>

  <option value="room">Merchant</option>

  <option value="room">room10</option>

  <option value="room">room11</option>

  <option value="room">room12</option>

  <option value="room">room13</option>

  <option value="room">room5</option>

  <option value="room">room6</option>

  <option value="room">room7</option>

  <option value="room">room8</option>

  <option value="room">room9</option>

  <option value="room">Village</option>

</select></td></tr>
<tr><th><label for="id_east">East:</label></th><td><ul class="errorlist"><li>Select a valid choice. 8 is not one of the available choices.</li></ul><select name="east" id="id_east">
  <option value="None">None</option>

  <option value="room">Blacksmith</option>

  <option value="room">Inn</option>

  <option value="room">Merchant</option>

  <option value="room">room10</option>

  <option value="room">room11</option>

  <option value="room">room12</option>

  <option value="room">room13</option>

  <option value="room">room5</option>

  <option value="room">room6</option>

  <option value="room">room7</option>

  <option value="room">room8</option>

  <option value="room">room9</option>

  <option value="room">Village</option>

</select></td></tr>
	<button type='submit' id="submit">Create</button>
</form>

<script type="text/javascript" src="/eel.js"></script>
<script type="text/javascript">
	function get_selected_direction(direction){
		for (var i of direction){
			if (i.selected){
				return i.text;
				}
			}
		}
	let btn = document.getElementById('submit');
	
	btn.onclick = 
	function create_room(){
		let items = document.getElementById('id_items');
		let items_list = [];
		for(var i of items.options){
			if ( i.selected){
				items_list.push(i.text);
				}
			}
			 
		let npcs = document.getElementById('id_npcs');
		let npcs_list = [];
		for(var i of npcs.options){
			if ( i.selected){
				npcs_list.push(i.text);
				}
			}
		
		let data = {
		name: document.getElementById('id_name').value,
		description: document.getElementById('id_description').value,
		items: items_list,
		npc: npcs_list,
		north: get_selected_direction(document.getElementById('id_north')),
		south: get_selected_direction(document.getElementById('id_south')),
		east: get_selected_direction(document.getElementById('id_east')),
		west: get_selected_direction(document.getElementById('id_west'))
		
		}
		if (data.name === "" || data.description === ""){
			return;
			}
		eel.create_room(data);
	}
	let items = document.getElementById('id_items');
	let item_options = items.options;
	let item_prefill = [
	
		'None',
	
	];
	for (var choice of item_options){
		for (var prefill of item_prefill){
			if (choice.innerText === prefill)
				choice.selected = true;
				}
			}
	let npcs = document.getElementById('id_npcs');
	let npc_options = npcs.options;
	let npc_prefill = [
	
		'None',
	
	];
	for (var choice of npc_options){
		for (var prefill of npc_prefill){
			if (choice.innerText === prefill)
				choice.selected = true;
				}
			}
			
</script>
